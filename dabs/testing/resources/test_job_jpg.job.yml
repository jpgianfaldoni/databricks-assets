resources:
  jobs:
    test_job_jpg:
      name: test_job_jpg
      tasks:
        - task_key: test_if_else
          depends_on:
            - task_key: set_value
          condition_task:
            left: '{{tasks.set_value.values.task_result}}'
            op: EQUAL_TO
            right: success
          email_notifications: {}
          run_if: ALL_SUCCESS
          webhook_notifications: {}
        - task_key: test_notebook
          email_notifications: {}
          notebook_task:
            base_parameters:
              catalog: jpg
              my_param: test_param
            notebook_path: ../src/test_job.py
            source: WORKSPACE
          run_if: ALL_SUCCESS
          webhook_notifications: {}
        - task_key: test_for_each
          depends_on:
            - task_key: test_notebook
          email_notifications: {}
          for_each_task:
            concurrency: 9
            inputs: '[1,2,3]'
            task:
              email_notifications: {}
              notebook_task:
                base_parameters:
                  catalog: jpg
                  my_param: '{{input}}'
                notebook_path: ../src/test_job.py
                source: WORKSPACE
              run_if: ALL_SUCCESS
              task_key: test_for_each_iteration
              webhook_notifications: {}
          run_if: ALL_SUCCESS
          webhook_notifications: {}
        - task_key: set_value
          depends_on:
            - task_key: test_for_each
          email_notifications: {}
          notebook_task:
            notebook_path: ../src/set_value.py
            source: WORKSPACE
          run_if: ALL_SUCCESS
          webhook_notifications: {}
      email_notifications: {}
      max_concurrent_runs: 1
      performance_target: PERFORMANCE_OPTIMIZED
      queue:
        enabled: true
      webhook_notifications: {}
